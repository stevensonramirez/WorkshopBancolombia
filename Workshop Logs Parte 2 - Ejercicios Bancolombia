{"version":"6","defaultTimeframe":{"from":"now()-2h","to":"now()"},"defaultSegments":[],"sections":[{"id":"21ecea6e-3e64-4e6d-b4ab-556dbdbb9287","type":"markdown","markdown":"## Sumarización\n* El comando **SUMMARIZE** agrupa logs que tienen los mismos valores para un campo determinado y los agrega.\n* Pueden establecerse nombres de alias para atributos dentro del comando de **SUMMARIZE**.\n* El comando **MAKETIMESERIES** crea una serie temporal a partir de los datos. Proporciona una manera conveniente de representar gráficamente datos no métricos sin procesar (como eventos o logs) a lo largo del tiempo.\n\n### Ejercicio 1\n1. Cuente el número de logs de cada loglevel.\n2. Cuente el número de logs de cada loglevel y cambie el nombre/alias del resultado a \"Nivel\"\n3. Cuente la cantidad de logs de cada loglevel en cada host, eliminando los \"NONE\"\n4. Visualice la cantidad de logs de errores a lo largo del tiempo.\n5. Visualice la cantidad de logs de cada loglevel a lo largo del tiempo.\n6. Visualice la cantidad de logs de cada loglevel a lo largo del tiempo con intervalos de 5 minutos."},{"id":"6cb50b33-ea96-46c6-8144-1823a55ef7d2","type":"dql","title":"Ejercicio 1.1 - Logs por loglevel","showTitle":false,"drilldownPath":[],"filterSegments":[],"previousFilterSegments":[],"state":{"input":{"timeframe":{"from":"now()-30m","to":"now()"},"value":""},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"AnalyticsIcon","isIconVisible":false,"autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle"},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"31fa8848-0fe5-4c36-8e64-f7b8756e7424","type":"dql","title":"Ejercicio 1.2 - Logs por loglevel con Alias","showTitle":false,"filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"state":{"input":{"timeframe":{"from":"now()-30m","to":"now()"},"value":""},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"AnalyticsIcon","isIconVisible":false,"autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle"},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"e84228fd-dd4c-44db-9df2-d7961ccbb38d","type":"dql","title":"Ejercicio 1.3 - Logs por loglevel y host, eliminando los NONE","showTitle":false,"drilldownPath":[],"filterSegments":[],"previousFilterSegments":[],"state":{"input":{"timeframe":{"from":"now()-30m","to":"now()"},"value":""},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"AnalyticsIcon","isIconVisible":false,"autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle"},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"d09cbbad-16eb-45a7-b99f-b2e2dc5e52dd","type":"dql","title":"Ejercicio 1.4 - Error logs sobre el tiempo","showTitle":false,"drilldownPath":[],"filterSegments":[],"previousFilterSegments":[],"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":""},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"AnalyticsIcon","isIconVisible":false,"autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle"},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true},"enabled":false,"componentState":{"inputData":{"dt.statistics.ui.ForecastAnalyzer":{"generalParameters":{"timeframe":{"startTime":"now()-2h","endTime":"now()"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"forecastHorizon":100,"forecastOffset":1,"query":"fetch logs\n| filter loglevel== \"ERROR\"\n| makeTimeseries ConteoErrores=count()"},"dt.statistics.ui.anomaly_detection.AutoAdaptiveAnomalyDetectionAnalyzer":{"generalParameters":{"timeframe":{"startTime":"now()-2h","endTime":"now()"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"numberOfSignalFluctuations":1,"alertCondition":"ABOVE","alertOnMissingData":false,"violatingSamples":3,"slidingWindow":5,"dealertingSamples":5,"query":"fetch logs\n| filter loglevel== \"ERROR\"\n| makeTimeseries ConteoErrores=count()"},"dt.statistics.ui.anomaly_detection.SeasonalBaselineAnomalyDetectionAnalyzer":{"generalParameters":{"timeframe":{"startTime":"now()-2h","endTime":"now()"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"tolerance":0.5,"alertCondition":"OUTSIDE","alertOnMissingData":false,"violatingSamples":3,"slidingWindow":5,"dealertingSamples":5,"query":"fetch logs\n| filter loglevel== \"ERROR\"\n| makeTimeseries ConteoErrores=count()"}},"lastExecution":{"analyzerName":"dt.statistics.ui.anomaly_detection.SeasonalBaselineAnomalyDetectionAnalyzer","inputData":{"dt.statistics.ui.ForecastAnalyzer":{"generalParameters":{"timeframe":{"startTime":"now()-2h","endTime":"now()"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"forecastHorizon":100,"forecastOffset":1,"query":"fetch logs\n| filter loglevel== \"ERROR\"\n| makeTimeseries ConteoErrores=count()"},"dt.statistics.ui.anomaly_detection.AutoAdaptiveAnomalyDetectionAnalyzer":{"generalParameters":{"timeframe":{"startTime":"now()-2h","endTime":"now()"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"numberOfSignalFluctuations":1,"alertCondition":"ABOVE","alertOnMissingData":false,"violatingSamples":3,"slidingWindow":5,"dealertingSamples":5,"query":"fetch logs\n| filter loglevel== \"ERROR\"\n| makeTimeseries ConteoErrores=count()"},"dt.statistics.ui.anomaly_detection.SeasonalBaselineAnomalyDetectionAnalyzer":{"generalParameters":{"timeframe":{"startTime":"now()-2h","endTime":"now()"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"tolerance":0.5,"alertCondition":"OUTSIDE","alertOnMissingData":false,"violatingSamples":3,"slidingWindow":5,"dealertingSamples":5,"query":"fetch logs\n| filter loglevel== \"ERROR\"\n| makeTimeseries ConteoErrores=count()"}}},"resultState":{},"analyzerHints":{},"selectedAnalyzerName":"dt.statistics.ui.anomaly_detection.SeasonalBaselineAnomalyDetectionAnalyzer"}}}},{"id":"fc72cb42-4493-4b66-95e3-63669f622148","type":"dql","title":"Ejercicio 1.5 - Logs por loglevel sobre el tiempo","showTitle":false,"drilldownPath":[],"filterSegments":[],"previousFilterSegments":[],"state":{"input":{"timeframe":{"from":"now()-30m","to":"now()"},"value":""},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"AnalyticsIcon","isIconVisible":false,"autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle"},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"fa36b1e4-d96b-44a1-881a-2f64f740ca4c","type":"dql","title":"Ejercicio 1.6 - Logs por loglevel sobre el tiempo en intervalos de 5 minutos","showTitle":false,"filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"state":{"input":{"timeframe":{"from":"now()-1h","to":"now()"},"value":""},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","isIconVisible":false,"autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle"},"valueBoundaries":{"min":"auto","max":"auto"},"label":{"showLabel":false},"icon":{"showIcon":false,"icon":""}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}},"state":"idle"}},{"id":"70dd5e42-1ae1-48b9-a8e7-021b54559d31","type":"markdown","markdown":"## Ordenar resultados con ordenar y limitar resultados\n* De forma predeterminada, el comando **SORT** ordena los logs en orden ascendente.\n* También podemos limitar el número de resultados con el comando **LIMIT**.\n\n### Ejercicio 2\n* Consultar los logs de errores más recientes. Muestre los últimos 5 logs de errores (orden descendente) en los últimos 30 minutos.\n* **Caso de uso:** Tenemos algunos equipos que están poniendo demasiados logs de DEBUG en producción y queremos premiar a los equipos que tienen la **menor** cantidad de logs de DEBUG en este ambiente.  **Cuente la cantidad de logs de este tipo por nombre de contenedor y organícelos en orden ascendiente el tiempo.**"},{"id":"5f592f4f-0e6f-4670-aca3-191cc2c2d570","type":"dql","showTitle":false,"title":"Ejercicio 2.1 - Ultimos 5 logs de errores","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"state":{"input":{"timeframe":{"from":"now()-30m","to":"now()"},"value":""},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"AnalyticsIcon","isIconVisible":false,"autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle"},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"ddfc6c35-a345-45a6-896d-4823f7d82549","type":"dql","showTitle":false,"title":"Ejercicio 2.2 - Contablizar Logs Debug de forma ascendente","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"state":{"input":{"timeframe":{"from":"now()-30m","to":"now()"},"value":""},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"AnalyticsIcon","isIconVisible":false,"autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle"},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}}]}